<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//Tigris//DTD XHTML 1.0 Transitional//EN"
"http://style.tigris.org/tigris_transitional.dtd">
<html>
<head>
 <style type="text/css">
/* <![CDATA[ */ 
@import "/branding/css/tigris.css"; 
@import "cfm_framework/include/javascript/common/treeTable/inst.css"; 
@import "cfm_framework/include/javascript/common/treeTable/nav.css";
/*  ]]> */
 </style>
  <link rel="stylesheet" type="text/css" href="http://style.tigris.org/client-side-include/dev/css/print.css" media="print" />
</script>

<script language="javascript1.2">
// You probably should factor this out to a .js file
function toggleRows(elm) {
 var rows = document.getElementsByTagName("TR");
 elm.style.backgroundImage = "url(cfm_framework/include/javascript/common/treeTable/images/folder-closed.gif)";
 var newDisplay = "none";
 var thisID = elm.parentNode.parentNode.parentNode.id + "-";
 // Are we expanding or contracting? If the first child is hidden, we expand
  for (var i = 0; i < rows.length; i++) {
   var r = rows[i];
   if (matchStart(r.id, thisID, true)) {
    if (r.style.display == "none") {
     if (document.all) newDisplay = "block"; //IE4+ specific code
     else newDisplay = "table-row"; //Netscape and Mozilla
     elm.style.backgroundImage = "url(cfm_framework/include/javascript/common/treeTable/images/folder-open.gif)";
    }
    break;
   }
 }
 
 // When expanding, only expand one level.  Collapse all desendants.
 var matchDirectChildrenOnly = (newDisplay != "none");

 for (var j = 0; j < rows.length; j++) {
   var s = rows[j];
   if (matchStart(s.id, thisID, matchDirectChildrenOnly)) {
     s.style.display = newDisplay;
     var cell = s.getElementsByTagName("TD")[0];
     var tier = cell.getElementsByTagName("DIV")[0];
     var folder = tier.getElementsByTagName("A")[0];
     if (folder.getAttribute("onclick") != null) {
      folder.style.backgroundImage = "url(cfm_framework/include/javascript/common/treeTable/images/folder-closed.gif)";
     }
   }
 }
}

function matchStart(target, pattern, matchDirectChildrenOnly) {
 var pos = target.indexOf(pattern);
 if (pos != 0) return false;
 if (!matchDirectChildrenOnly) return true;
 if (target.slice(pos + pattern.length, target.length).indexOf("-") >= 0) return false;
 return true;
}

function collapseAllRows() {
 var rows = document.getElementsByTagName("TR");
 for (var j = 0; j < rows.length; j++) {
   var r = rows[j];
   if (r.id.indexOf("-") >= 0) {
     r.style.display = "none";    
   }
 }
}
</script>

 <title>SSTree Tree Table</title>
</head>

<body onload="collapseAllRows();"> 

<div class="app">

 <h2><a href="http://sstree.tigris.org/">SSTree</a> Tree Table</h2>

<div style="background: #eee; border: dashed 1px #000;">
 <table width="100%">

 <tr>
  <!-- specifing one or more widths keeps columns constant despite changes in visible content -->
  <th width="33%">Location</th>
  <th>Size</th>
  <th>Owner</th>
  <th>Details</th>
 </tr>

 <tr id="1" class="a">
  <td id="p1"><div id="p2" class="tier1"><a id="p3" href="#" onclick="toggleRows(this)" class="folder"></a>By Activity</div></td>
  <td>--</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="1-1" class="a">
  <td id="p4"><div id="p5" class="tier2"><a id="p6" href="#" onclick="toggleRows(this)" class="folder"></a>Project Planning</div></td>
  <td id="p7">--</td>
  <td>username</td>
  <td>details...</td>
 </tr>

 <tr id="1-1-1" class="a">
  <td><div class="tier3"><a href="#" class="doc"></a>Overview</div></td>
  <td>123KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="1-1-2" class="a">
  <td><div class="tier3"><a href="#" class="doc"></a>Proposal</div></td>
  <td>123KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="1-1-3" class="a">
  <td><div class="tier3"><a href="#" class="doc"></a>Target and benefits</div></td>
  <td>123KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="1-1-40" class="a">
  <td><div class="tier3"><a href="#" class="doc"></a>Project plan</div></td>
  <td>123KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="1-1-41" class="a">
  <td><div class="tier4"><a href="#" class="doc"></a>Resource needs</div></td>
  <td>123KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="1-2" class="a">
  <td><div class="tier2"><a href="#" onclick="toggleRows(this)" class="folder"></a>Requirements and Specification</div></td>
  <td>--</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="1-2-10" class="a">
  <td><div class="tier3"><a href="#" class="doc"></a>User needs</div></td>
  <td>14KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="1-2-11" class="a">
  <td><div class="tier4"><a href="#" class="doc"></a>Interview Notes</div></td>
  <td>14KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>

 
 <tr id="1-2-2" class="a">
  <td><div class="tier3"><a href="#" class="doc"></a>Software Requirements Specification</div></td>
  <td>123KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="1-2-21" class="a">
  <td><div class="tier4"><a href="#" class="doc"></a>Use Case Suite</div></td>
  <td>14KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="1-2-22" class="a">
  <td><div class="tier4"><a href="#" class="doc"></a>Feature Set</div></td>
  <td>14KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="2" class="a">
  <td><div class="tier1"><a href="#"  onclick="toggleRows(this)" class="folder"></a>By Stakeholder</div></td>
  <td>--</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="2-1" class="a">
  <td><div class="tier2"><a href="#" onclick="toggleRows(this)" class="folder"></a>For Everyone</div></td>
  <td>--</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="2-1-1" class="a">
  <td><div class="tier3"><a href="#" class="doc"></a>Glossary</div></td>
  <td>123KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="2-1-2" class="a">
  <td><div class="tier3"><a href="#" class="doc"></a>Overview</div></td>
  <td>124KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="2-1-3" class="a">
  <td><div class="tier3"><a href="#" class="doc"></a>Release Checklist</div></td>
  <td>123KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="2-1-40" class="a">
  <td><div class="tier3"><a href="#" class="doc"></a>User needs</div></td>
  <td>123KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>
 
 <tr id="2-1-41" class="a">
  <td><div class="tier4"><a href="#" class="doc"></a>Interview notes</div></td>
  <td>14KB</td>
  <td>username</td>
  <td>details...</td>
 </tr>

</table>
</div>

<p>Click on the folder icons to expand or collapse sub-items.<p>

<p>Features of this code snippet:</p>
<ul>
 <li>Tree items can have additional information in other table columns</li>
 <li>Short JavaScript code</li>
 <li>Page is structured with clean HTML, not a JavaScript array of constants</li>
 <li>Simple numbering convention for item IDs</li>
 <li>Put any HTML inside table cells</li>
 <li>Folder and document icons</li>
 <li>Users without JavaScript will see entire tree expanded</li>
</ul>


</div>
</body>
</html>